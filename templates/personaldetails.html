{% load static %}
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Personal details</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/line-awesome/1.3.0/line-awesome/css/line-awesome.min.css'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> 
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="{% static 'styles/styles.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'styles/style.css' %}">

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/fee06b6511.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
  
  <style>
     .profile-pic-wrapper {
  height: 50vh;
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  
  
}
.pic-holder {
  text-align: center;
  position: relative;
  border-radius: 50%;
  width: 150px;
  height: 150px;
  overflow: hidden;
  display: flex;
  
  
}

.pic-holder .pic {
  height: 100%;
  width: 100%;
  -o-object-fit: cover;
  object-fit: cover;
  -o-object-position: center;
  object-position: center;
}

.pic-holder .upload-file-block,
.pic-holder .upload-loader {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  background-color: rgba(90, 92, 105, 0.7);
  color: #f8f9fc;
  font-size: 12px;
  font-weight: 600;
  opacity: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.pic-holder .upload-file-block {
  cursor: pointer;
}

.pic-holder:hover .upload-file-block {
  opacity: 1;
}

.pic-holder.uploadInProgress .upload-file-block {
  display: none;
}

.pic-holder.uploadInProgress .upload-loader {
  opacity: 1;
}

/* Snackbar css */
.snackbar {
  visibility: hidden;
  min-width: 250px;
  background-color: #333;
  color: #fff;
  text-align: center;
  border-radius: 2px;
  padding: 16px;
  position: fixed;
  z-index: 1;
  left: 50%;
  bottom: 30px;
  font-size: 14px;
  transform: translateX(-50%);
}

.snackbar.show {
  visibility: visible;
  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
  animation: fadein 0.5s, fadeout 0.5s 2.5s;
}

@-webkit-keyframes fadein {
  from {
    bottom: 0;
    opacity: 0;
  }
  to {
    bottom: 30px;
    opacity: 1;
  }
}

@keyframes fadein {
  from {
    bottom: 0;
    opacity: 0;
  }
  to {
    bottom: 30px;
    opacity: 1;
  }
}

@-webkit-keyframes fadeout {
  from {
    bottom: 30px;
    opacity: 1;
  }
  to {
    bottom: 0;
    opacity: 0;
  }
}

@keyframes fadeout {
  from {
    bottom: 30px;
    opacity: 1;
  }
  to {
    bottom: 0;
    opacity: 0;
  }
}
  </style>
</head>

<body>
<!-- partial:index.partial.html -->
<input type="checkbox" name="" id="menu-toggle">
<div class="overlay"><label for="menu-toggle">
  </label></div>
<div class="sidebar">
  <div class="sidebar-container">
    <div class="brand">
      <h4>
        <span class="lab la-staylinked"></span>
        Project Grader
      </h4>
    </div>
    <div class="sidebar-avatar">
      <div>
        <a href="#"><span class="las la-user la-4x log-color"></span></a>
      </div>
      <div class="avatar-info">
        <div class="avatar-text">
          <h5>Student name</h5>
          <small>14-10-69</small>
        </div>
        <span class="las la-angle-double-down"></span>
      </div>
    </div>

    <div class="sidebar-menu">
      <li><a href="/StudentDashboard/" class="sidebar-icon-text"><i class="las la-adjust"></i>Dasboard</a></li>
      <li><a href="#" class="sidebar-icon-text"><i class="las la-stream"></i>Quizzes</a></li>
      <li>
        <div class="dropdown">
          <a class="sidebar-icon-text"><i class="las la-stream"></i>Projects<i class="las la-angle-down"></i></a>
          <div class="dropdown-content">
            <a href="#">Add projects</a>
            <a href="#">View previous</a>
          </div>
        </div>
      </li>
      <li><a href="#" class="active sidebar-icon-text"><i class="las la-stream"></i>Personal details</a></li>
    </div>

  </div>
</div>
<div class="main-content">
    <header>
        <div class="header-wrapper">
          <label for="menu-toggle">
            <span class="las la-bars"></span>
          </label>
          <div class="header-title">
            <h1>Your Info</h1>
            <p>Add.Edit.Analyse</p>
          </div>
        </div>
        
        <div class="header-action justify-content-end">
          <a href="#" data-toggle="popover" title="Profile" data-content="Another popover"><span class="las la-user la-2x log-color"></span></a>
          <a href="#" data-toggle="popover" title="Logout" data-content="Another popover"><span class="las la-sign-out-alt la-2x log-color"></span></a>
        </div>
    
      
      </header>
      
      <div class="container-fluid px-1 py-5 mx-auto">
        <div class="row d-flex justify-content-center">
            <div class="col-xl-10 col-lg-8 col-md-9 col-11">
                  <div class="card">
                    
                    <form class="form-card" method="POST" enctype="multipart/form-data" action = "/personaldetails/">
                      {% csrf_token %}
                      <h3 class="justify-content-between text-center mb-4">PERSONAL DETAILS</h3>
                      <!--profile image-->
                      <div class="row justify-content-between text-center">
                        <label class="form-control-label px-3">Profile pic<span class="text-danger"></span>
                        <!--profile image div-->
                        <div class="profile-pic-wrapper">
                          <div class="pic-holder">
                            <!-- uploaded pic shown here -->
                            <img id="profilePic" class="pic" src="https://source.unsplash.com/random/150x150">
                        
                            <label for="newProfilePhoto" class="upload-file-block">
                              <div class="text-center">
                                <div>
                                  <i class="fa fa-camera fa-2x"></i>
                                </div>
                                <div class="text-uppercase">
                                  Update <br /> Profile Photo
                                </div>
                              </div>
                            </label>
                            <Input class="uploadProfileInput" type="file" name="profile_pic" id="newProfilePhoto" accept="image/*" style="display: none;" />
                          </div>
                        </div>
                      </div>

                      <h4 class="justify-content-between">Personal Details</h4>

                      <div class="row justify-content-between text-left mt-4">
                        <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Date of birth<span class="text-danger"> *</span></label> <input type="date" id="dob" name="dob" onblur="validate(2)"> </div>
                        <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Mobile No.<span class="text-danger"> *</span></label> <input type="text" id="mob" name="mbno" placeholder="" onblur="validate(5)"> </div>
                      </div>

                      <!--gender-->
                        <div>
                          <div class="form-group col-sm-6 flex-column d-flex">
                            <label class="form-control-label px-3">Gender<span class="text-danger"> *</span></label>
                          </div>  
                          <div class="form-group">
                            <input class="form-check-input r" type="radio" name="gender1" id="Female" value="Female">
                            <label class="form-check-label rg" for="Female">Female</label>
                            <input class="form-check-input r" type="radio" name="gender1" id="Male" value="Male">
                            <label class="form-check-label rg" for="Male">Male</label>
                            <input class="form-check-input r" type="radio" name="gender1" id="Transgender" value="Transgender" >
                            <label class="form-check-label rg" for="Transgender">Transgender</label>
                            <input class="form-check-input r" type="radio" name="gender1" id="Intersex" value="Intersex" >
                            <label class="form-check-label rg" for="Intersex">Intersex</label>
                            <input class="form-check-input r" type="radio" name="gender1" id="nb" value="nb" >
                            <label class="form-check-label rg" for="nb">Non binary</label>
                            <input class="form-check-input r" type="radio" name="gender1" id="pns" value="pns">
                            <label class="form-check-label rg" for="pns">Prefer not to say</label>
                          </div>
                        </div> 
                          <div class="form-group col-sm-6 flex-column d-flex mb-4">
                            <input type="text" id="lms" name="lms" placeholder="let me specify" onclick="resetSelection()">
                            <input type="hidden" name="gender" readonly>
                          </div>

                        
                        
                        

                        <div class="row justify-content-between text-left mt-4">
                          <div class="form-group col-sm-6 flex-column d-flex"><label class="form-control-label px-3">Select State<span class="text-danger"> *</span></label>
                            <div class="form-group flex-column d-flex">
                              <select class="form-control" id="State" name="state" size="1" onchange="makeSubmenu(this.value)">
                                <option value="" disabled selected>Choose State</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Kerala">Kerala</option>
                              </select>
                            </div>
                          </div>  

                          <div class="form-group col-sm-6 flex-column d-flex"><label class="form-control-label px-3">Select City<span class="text-danger"> *</span></label>
                            <div class="form-group flex-column d-flex">
                                <select class="form-control" id="citySelect" name="city" size="1">
                                  <option value="" disabled selected>Choose City</option>
                                  <option value="citiesOptions"></option>
                                </select>
                            </div>
                        </div>
                      </div>

                      <hr>
                      <h4 class="justify-content-between">Academic Details</h4>

                      <div class="row justify-content-between text-left mt-4">
                        <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Semester Average Marks<span class="text-danger"> *</span></label> <input type="text" id="sem_average_marks" name="sem_average_marks" onblur="validate(2)"> </div>
                        <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Current Semester<span class="text-danger"> *</span></label> <input type="text" id="current_sem" name="current_sem" placeholder="" onblur="validate(5)"> </div>
                      </div>

                      <div class="row justify-content-between text-left mt-4">
                        <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Language<span class="text-danger"> *</span></label> <input type="text" id="language" name="language" placeholder="" onblur="validate(5)"> </div>
                        <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Organiztion<span class="text-danger"> *</span></label> <input type="text" id="organization" name="organization" placeholder=""> </div>
                      </div>

                        <div class="row justify-content-between text-left mt-4">
                              <div class="row justify-content-between text-left">
                                <div class="form-group col-sm-6 flex-column d-flex"><label class="form-control-label px-3">Year Of Passing<span class="text-danger"> *</span></label>
                                  <div class="form-group flex-column d-flex">
                                    <select class="form-control select2" name = "yop">
                                      <option value = "2016">2016</option> 
                                      <option value = "2017">2017</option>  
                                      <option value = "2018">2018</option> 
                                      <option value = "2019">2019</option>  
                                      <option value = "2020">2020</option>  
                                      <option value = "2021">2021</option>
                                      <option value = "2022">2022</option>
                                      <option value = "2023">2023</option>
                                      <option value = "2024">2024</option>
                                      <option value = "2025">2025</option>
                                      <option value = "2026">2026</option>
                                      <option value = "2027">2027</option>
                                      <option value = "2028">2028</option>
                                      <option value = "2029">2029</option>
                                      <option value = "2030">2030</option>  
                                   </select>         
                                  </div>
                                </div>  
      
                                <div class="form-group col-sm-6 flex-column d-flex"><label class="form-control-label px-3">Specialization<span class="text-danger"> *</span></label>
                                  <div class="form-group flex-column d-flex">
                                    <select class="form-control select2" name = "specialization">
                                      <option value = "computer science">Computer Science</option> 
                                      <option value = "IT">Information Technology</option>  
                                      <option value = "extc">Electronics & Telecommunication</option> 
                                      <option value = "mech">Mechanical</option>  
                                      <option value = "etrx">Electrical</option>  
                                      <option value = "civil">Civil</option>
                                      <option value = "aero">Aeronatics</option>                                  
                                   </select>
                                  </div>
                                </div>
                        </div>                                                               
                      </div>


                      <div class="row justify-content-between text-left mt-4">
                        <div class="container">
                          <div class="row">
                            <div class="row justify-content-between text-left">
                              <div class="form-group col-sm-6 flex-column d-flex"><label class="form-control-label px-3">Course<span class="text-danger"> *</span></label>
                                <div class="form-group flex-column d-flex">
                                  <div class="form-group">
                                    <input class="form-check-input r" type="radio" name="course1" id="BE" value="option3" >
                                    <label class="form-check-label rg" for="BE">BE</label>
                                    <input class="form-check-input r" type="radio" name="course1" id="BTECH" value="option3" >
                                    <label class="form-check-label rg" for="BTECH">BTECH</label>
                                  </div>   
                                </div>
                              </div>  
    
                              <div class="form-group col-sm-6 flex-column d-flex"><label class="form-control-label px-3">Year Of Study<span class="text-danger"> *</span></label>
                                <div class="form-group  flex-column d-flex">
                                  <div class="form-group r">
                                    <input class="form-check-input r" type="radio" name="yos1" id="FE" value="option1">
                                    <label class="form-check-label rg" for="FE">FE</label>
                                    <input class="form-check-input r" type="radio" name="yos1" id="SE" value="option2">
                                    <label class="form-check-label rg" for="SE">SE</label>
                                    <input class="form-check-input r" type="radio" name="yos1" id="TE" value="option3" >
                                    <label class="form-check-label rg" for="TE">TE</label>
                                    <input class="form-check-input r" type="radio" name="yos1" id="BE" value="option3" >
                                    <label class="form-check-label rg" for="BE">BE</label>
                                  </div>
                                </div>
                            </div>
                          </div>                                                    
                        </div>
                      </div>                                                               
                    </div>

                        <div class="row justify-content-between text-left">
                          <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Linkedin URL<span class="text-danger"> *</span></label> <input type="text" id="linkedin" name="linkedin" placeholder="" onblur="validate(5)"> </div>
                            <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Github URL<span class="text-danger"> *</span></label> <input type="text" id="github" name="github" placeholder="" onblur="validate(5)"> </div>
                        </div>

                        <div class="row justify-content-between text-left">
                          <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Description<span class="text-danger"> *</span></label><textarea type="text" id="description" name="description" placeholder=""></textarea></div>
                          <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Resume<span class="text-danger"> *</span></label><input type="file" id="resume" name="resume" placeholder=""></div>

                        </div>
                 
                        <div class="row">
                            <div class="form-group col-sm-6"> <button type="submit" class="profile-btn-block" onclick="assignGender()">Submit</button> </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
  </div>
      
    
  </body>
  <script>
    $('.select2').select2();
  </script>
  <script>
    $(document).on("change", ".uploadProfileInput", function () {
  var triggerInput = this;
  var currentImg = $(this).closest(".pic-holder").find(".pic").attr("src");
  var holder = $(this).closest(".pic-holder");
  var wrapper = $(this).closest(".profile-pic-wrapper");
  $(wrapper).find('[role="alert"]').remove();
  var files = !!this.files ? this.files : [];
  if (!files.length || !window.FileReader) {
    return;
  }
  if (/^image/.test(files[0].type)) {
    // only image file
    var reader = new FileReader(); // instance of the FileReader
    reader.readAsDataURL(files[0]); // read the local file

    reader.onloadend = function () {
      $(holder).addClass("uploadInProgress");
      $(holder).find(".pic").attr("src", this.result);
      $(holder).append(
        '<div class="upload-loader"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>'
      );

      // Dummy timeout; call API or AJAX below
      setTimeout(() => {
        $(holder).removeClass("uploadInProgress");
        $(holder).find(".upload-loader").remove();
        // If upload successful
        if (Math.random() < 0.9) {
          $(wrapper).append(
            '<div class="snackbar show" role="alert"><i class="fa fa-check-circle text-success"></i> Profile image updated successfully</div>'
          );

          // Clear input after upload
          $(triggerInput).val("");

          setTimeout(() => {
            $(wrapper).find('[role="alert"]').remove();
          }, 3000);
        } else {
          $(holder).find(".pic").attr("src", currentImg);
          $(wrapper).append(
            '<div class="snackbar show" role="alert"><i class="fa fa-times-circle text-danger"></i> There is an error while uploading! Please try again later.</div>'
          );

          // Clear input after upload
          $(triggerInput).val("");
          setTimeout(() => {
            $(wrapper).find('[role="alert"]').remove();
          }, 3000);
        }
      }, 1500);
    };
  } else {
    $(wrapper).append(
      '<div class="alert alert-danger d-inline-block p-2 small" role="alert">Please choose the valid image.</div>'
    );
    setTimeout(() => {
      $(wrapper).find('role="alert"').remove();
    }, 3000);
  }
});

  </script>
  <script>
    document.getElementById("proj").addEventListener("click", function () {
  
      localStorage.setItem('Projectadded', true);
    });
  </script>
  <script type="text/javascript">
    var citiesByState = {
    Odisha: ["Bhubaneswar","Puri","Cuttack"],
    Maharashtra: ["Mumbai","Pune","Nagpur"],
    Kerala: ["kochi","Kanpur"]
    }
    function makeSubmenu(value) {
    if(value.length==0) document.getElementById("citySelect").innerHTML = "<option></option>";
    else {
    var citiesOptions = "";
    for(cityId in citiesByState[value]) {
    citiesOptions+="<option>"+citiesByState[value][cityId]+"</option>";
    }
    document.getElementById("citySelect").innerHTML = citiesOptions;
    }
    }
  
    function assignValue() {
      let get_gender = '';
      var flag = false;
      var get_lms = document.getElementById("lms").value;
      console.log('lms',get_lms);
      arr = ['Female','Male','Transgender','Intersex','Non Binary','pns'];
      var g = document.getElementsByName('gender1');
      var y = document.getElementsByName('yos1');
      var c = document.getElementsByName('course1');
      console.log('c',c);
      for (let i = 0; i < arr.length; i++){
        if (g[i].checked){
          flag = true;
          get_gender = arr[i];
          document.getElementsByName("gender")[0].value = get_gender;
          break
        }  
      }
      
      if (flag == false){
        document.getElementsByName("gender")[0].value = get_lms;
      }  
      
      study = ['FE','SE','TE','BE'];
      for(let i=0;i<4;i++){
        if(y[i].checked){
        var get_yos = study[i]
          document.getElementsByName('yos')[0].value = get_yos;
          break
        }
      }
      
      var get_course = '';
      co = ['BE','BTECH'];
      for(let i=0;i<2;i++){
        if(c[i].checked){
          get_course = co[i];
          document.getElementsByName('course')[0].value = get_course;
          break
        }
      }
  
    }
  
    function resetSelection() {
      console.log('reset');
      var chk;
      chk = document.getElementsByName("gender1");
     console.log('chk',chk);
     for (let i = 0;i<chk.length;i++){
          if (chk[i].checked){
              chk[i].checked = false;
          } 
     }
    
    
  }
    
    </script>
  <script  src="./script.js"></script>